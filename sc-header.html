<link rel="import" href="../font-roboto/roboto.html">
<link rel="import" href="../core-toolbar/core-toolbar.html">
<link rel="import" href="../paper-elements/paper-elements.html">
<link rel="import" href="../core-icon/core-icon.html">
<link rel="import" href="../core-icons/communication-icons.html">

<!--
Element providing the inner header to a register selected by leftbar in the 
sisComando app.

##### Example

    <sc-header
    issueInfo ='{"register": "#2015RI/000046393", "title":"SICAP - SISTEMA DE CALCULOS E PERICIAS - AMBIENTE", "uga": "SUPGS", "ugs": "SUNFJ", "created_at":"19/02/2015 13h27"}'>
    </sc-header>

@element sc-header
@blurb Element providing the header to all sisComando app.
@status alpha
@homepage http://siscomando.github.io/horacioibrahim/sc-header
-->
<polymer-element class="core-header" name="sc-header" attributes="notitle author issueInfo">

  <template>
    <link rel="stylesheet" href="sc-header.css">
    <!-- init element sc-header -->
    <div class="container-header" vertical layout>
      <core-toolbar>
        <div class="issues-info">
          <span class="issues-header">{{issueInfo.title}}</span>
          <label class="first-child">Registro:</label>
            <span class="issues-details">{{issueInfo.register}}</span>
          <label>UG Atendimento:</label>
            <span class="issues-details">{{issueInfo.uga}}</span>
          <label>UG Servi√ßo:</label>
            <span class="issues-details">{{issueInfo.ugs}}</span>
          <label>Acionado:</label>
            <span class="issues-details">{{issueInfo.date}}</span>
        </div>
      </core-toolbar>

      <core-toolbar>
        <paper-tabs id="tabs" selected="resume" self-end >
          <paper-tab name="resume">
            <core-icon icon="dashboard"></core-icon><span class="menu-label">Resumo</span>
          </paper-tab>
          <paper-tab name="comments">
            <core-icon icon="communication:comment"></core-icon><span class="menu-label">Comentarios</span>
          </paper-tab>
          <paper-tab name="people">
            <core-icon icon="group-work"></core-icon><span class="menu-label">Pessoas</span>
          </paper-tab>
          <paper-tab name="links">
            <core-icon icon="link"></core-icon><span class="menu-label">Links</span>
          </paper-tab>
        </paper-tabs>
      </core-toobar>
    </div>
  </template>

  <script>

    Polymer({
      /**
       * The `author` attribute sets an initial author
       *
       * @attribute author
       * @type string
       * @default 'Horacio Ibrahim'
       */
      author: 'Horacio Ibrahim',
      /**
       * The `issueInfo` attribute sets the header info. It to require preset
       * fields as: register, title, uga, ugs, created_at.
       *
       * Details:
       *
       *
       *    `register`: ticket number or ID
       *
       *    `title`: service name (e.: systems, services as Expresso)
       *
       *    `uga`: responsible sector by treatment
       *
       *    `ugs`: responsible sector by customer agreement
       *
       *    `create_at`: date that the ticket was created by final customer
       *
       *
       * @attribute issueInfo
       * @type object
       * @default  {}
       */
      issueInfo: {},
      publish: {
        // publics properties
      },
      /* the best place to the constructor for array or object */
      created: function() {
        // initialize but it not is turned public to use by users of the element
        // to turn public to use attributes or publish.
        this.issueInfo = {};
      }
      ,
      ready: function() {
        // Ready is a lifecycle callback.
        // You can do setup work in here.
        // More info: http://www.polymer-project.org/docs/polymer/polymer.html#lifecyclemethods
        // simple test alert(this.issueInfo.register);
        if (!('register' in this.issueInfo))
            this.issueInfo.register = "------------";
        if (!('title' in this.issueInfo))
            this.issueInfo.title = "------------";
        if (!('uga' in this.issueInfo))
            this.issueInfo.uga = "------------";
        if (!('ugs' in this.issueInfo))
            this.issueInfo.ugs = "------------";
        if (!('created_at' in this.issueInfo))
            this.issueInfo.created_at = "------------";

        var scnavbar = document.querySelector('sc-navbar');

        scnavbar.addEventListener('sc-select', function(e){
            console.log("Eu fui selecionado: " + e.detail.issue);
            mythis = document.querySelector('sc-header');
            mythis.issueInfo = e.detail.issue;
            //this.issueInfo["register"] = e.detail.issue.register;
        });
      }
    });

  </script>

</polymer-element>
